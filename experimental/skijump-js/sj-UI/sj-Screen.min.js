SJ.Screen=class{constructor(setup,draw){this._drawable=[],this._buttons=[],this.draw=draw||this.draw,this.setBackgroundColor(color(10,10,50)),setup(this)}setBackgroundColor(bgColor){this.backgroundColor=bgColor}draw(){push(),background(this.backgroundColor),this._drawable.forEach(obj=>{obj.draw()}),pop()}onMouseMove(){let stopMouse=!1;return this._buttons.forEach(btn=>{if(!btn.disabled)if(this.isMouseInBtn(btn)){if(!btn.isMouseIn)return btn.isMouseIn=!0,btn.onMouseEnter(),void(stopMouse=!0)}else if(btn.isMouseIn)return btn.isMouseIn=!1,btn.onMouseLeave(),void(stopMouse=!0)}),stopMouse}onMousePress(){let stopMouse=!1;return this._buttons.forEach(btn=>{if(!btn.disabled)return this.isMouseInBtn(btn)?(btn.isPress=!0,btn.onMousePress(),void(stopMouse=!0)):void 0}),stopMouse}onMouseRelease(){let stopMouse=!1;return this._buttons.forEach(btn=>{if(!btn.disabled)return btn.isPress&&(btn.isPress=!1,this.isMouseInBtn(btn))?(btn.onMouseRelease(),void(stopMouse=!0)):void 0}),stopMouse}isMouseInBtn(btn){return this.isMouseInRect(btn.x,btn.y,btn.w,btn.h)}isMouseInRect(x,y,w,h){return SJ.mouseScreenX>=x&&SJ.mouseScreenX<x+w&&SJ.mouseScreenY>=y&&SJ.mouseScreenY<y+h}appendDrawable(obj){this._drawable.push(obj)}appendButton(btn){this._buttons.unshift(btn),this.appendDrawable(btn)}};