SJ.Label=class{constructor(content,x,y,aling=LEFT,vAling=CENTER,fontSize=18,fontColor=color(255,255,255)){this.x=x,this.y=y,this.content=content,this.aling=aling,this.vAling=vAling,this.fontSize=fontSize,this.fontColor=fontColor}draw(){push(),textSize(this.fontSize),textAlign(this.aling,this.vAling),fill(this.fontColor),text(this.content,this.x,this.y),pop()}},SJ.Button=class{constructor(caption,x,y,w,h,onMousePress,onMouseRelease,onMouseEnter,onMouseLeave,draw,overrideLabelDraw=!1){this.label=new SJ.Label(caption,0,0,CENTER,CENTER,.6*h),this.x=x,this.y=y,this.w=w,this.h=h,this.isMouseIn=!1,this.isPress=!1,this.onMousePress=onMousePress||(()=>{}),this.onMouseRelease=onMouseRelease||(()=>{}),this.onMouseEnter=onMouseEnter||(()=>{}),this.onMouseLeave=onMouseLeave||(()=>{}),this.draw=draw||this.draw,this.disabled=!1,overrideLabelDraw&&(this.label.draw=()=>{push(),textSize(this.label.fontSize),textAlign(this.label.aling,this.label.vAling),text(this.label.content,this.label.x,this.label.y),pop()})}draw(){this.disabled?fill(37,53,64):this.isMouseIn?this.isPress?fill(17,91,140):fill(14,143,230):fill(10,123,199),rect(this.x,this.y,this.w,this.h),push(),translate(this.x+this.w/2,this.y+this.h/2),this.disabled?fill(60):fill(0),this.label.draw(),pop()}},SJ.Texture=class{constructor(textureName,x,y){this.x=x,this.y=y,this.texture=SJ.ImageLoader.load(textureName,()=>{this.w=this.texture.width,this.h=this.texture.height})}draw(){image(this.texture,this.x,this.y)}},SJ.TextWindow=class{constructor(x,y,txt,txtSize=16,textColor=color(255),bgColor=color(0,10,50)){this.x=x,this.y=y,this.setTextSize(txtSize),this.setText(txt),this.textColor=textColor,this.bgColor=bgColor}draw(){push(),translate(this.x,this.y),fill(this.bgColor),stroke(255),rect(0,0,this.w,this.h),textSize(this.textSize),textAlign(CENTER,CENTER),fill(this.textColor),noStroke(),text(this.text,this.w/2,this.h/2),pop()}setText(txt){this.text=txt;const lines=txt.split(/\n/gm);textSize(this.textSize);let longestLineWidth=textWidth(lines[0]);for(let i=1;i<lines.length;i++){const lineWidth=textWidth(lines[i]);lineWidth>longestLineWidth&&(longestLineWidth=lineWidth)}this.w=longestLineWidth+20,this.h=lines.length*textLeading()+20}setTextSize(textSize){this.textSize=textSize}},SJ.MouseFollowingPopup=class{constructor(txt,txtSize=16,textColor=color(255),bgColor=color(0,10,50)){this.isVisible=!1,this.popup=new SJ.TextWindow(0,0,txt,txtSize,textColor,bgColor)}draw(){push();const maxX=SJ.SCREEN_WIDTH-this.popup.w,maxY=SJ.SCREEN_HEIGHT-this.popup.h;let x=max(min(maxX,SJ.mouseScreenX-this.popup.w/2),0),y=max(min(maxY,SJ.mouseScreenY-this.popup.h-10),0);translate(x,y),this.popup.draw(),pop()}show(){this.isVisible=!0}hide(){this.isVisible=!1}},SJ.createLocationButton=(locationName,x,y,fileName)=>{const btn=new SJ.Button(locationName,x,y,200,120);return btn.label.fontSize=18,btn.label.vAling=BOTTOM,btn.onMouseRelease=()=>{SJ._startGame(fileName)},btn.draw=()=>{push(),btn.disabled?fill(64,57,57):btn.isMouseIn?btn.isPress?fill(158,55,55):fill(224,130,130):fill(196,94,94),rect(btn.x,btn.y,btn.w,btn.h),push(),translate(btn.x+btn.w/2,btn.y+btn.h-2),btn.label.draw(),pop(),pop()},btn},SJ.createItemButton=(x,y,item)=>{const btn=new SJ.Button(item.itemName,x,y,200,120);btn.label.fontSize=18,btn.label.vAling=BOTTOM;const popup=new SJ.MouseFollowingPopup(item.description);return SJ.ScreensManager.addPopup(popup),btn.onMouseEnter=()=>{popup.show()},btn.onMouseLeave=()=>{popup.hide()},btn.onMouseRelease=()=>{SJ.money<item.price||(SJ.itemsManager.addItem(item),btn.disabled=!0,SJ.money-=item.price,popup.hide())},btn.draw=()=>{push(),btn.disabled?fill(24,150,49):btn.isMouseIn?btn.isPress?fill(25,49,115):fill(46,95,230):fill(32,76,199),rect(btn.x,btn.y,btn.w,btn.h),push(),translate(btn.x+btn.w/2,btn.y+btn.h-2),btn.disabled?fill(200):fill(255),btn.label.draw(),pop(),btn.disabled||btn.isMouseIn,pop()},btn};