SJ.Label=class{constructor(content,x,y,align=LEFT,vAlign=CENTER,fontSize=18,fontColor=color(255,255,255)){this.x=x,this.y=y,this.content=content,this.align=align,this.vAlign=vAlign,this.fontSize=fontSize,this.fontColor=fontColor,this.isVisible=!0}draw(){push(),textSize(this.fontSize),textAlign(this.align,this.vAlign),fill(this.fontColor),text(this.content,this.x,this.y),pop()}show(){this.isVisible=!0}hide(){this.isVisible=!1}},SJ.Button=class{constructor(caption,x,y,w,h,onMousePress,onMouseRelease,onMouseEnter,onMouseLeave,draw,overrideLabelDraw=!1){this.label=new SJ.Label(caption,0,0,CENTER,CENTER,.6*h),this.x=x,this.y=y,this.w=w,this.h=h,this.onMousePress=onMousePress||(()=>{}),this.onMouseRelease=onMouseRelease||(()=>{}),this.onMouseEnter=onMouseEnter||(()=>{}),this.onMouseLeave=onMouseLeave||(()=>{}),this.disabled=!1,this.canStopMouse=!0,this.isMouseIn=!1,this.isPress=!1,this.isVisible=!0,overrideLabelDraw&&(this.label.draw=()=>{push(),textSize(this.label.fontSize),textAlign(this.label.align,this.label.vAlign),text(this.label.content,this.label.x,this.label.y),pop()})}draw(){push(),this.disabled?fill(37,53,64):this.isMouseIn?this.isPress?fill(17,91,140):fill(14,143,230):fill(10,123,199),rectMode(CORNER),rect(this.x,this.y,this.w,this.h),translate(this.x+this.w/2,this.y+this.h/2),this.disabled?fill(60):fill(0),this.label.draw(),pop()}show(){this.isVisible=!0}hide(){this.isVisible=!1}},SJ.Texture=class{constructor(textureName,x,y){this.x=x,this.y=y,this.texture=SJ.ImageLoader.load(textureName,()=>{this.w=this.texture.width,this.h=this.texture.height})}draw(){image(this.texture,this.x,this.y)}},SJ.TextWindow=class{constructor(x,y,txt,txtSize=16,textColor=color(255),bgColor=color(0,10,50)){this.x=x,this.y=y,this.textColor=textColor,this.bgColor=bgColor,this._setPadding(10,10,10,10),this._setTextSize(txtSize),this._setText(txt),this._calculateSize()}draw(){push(),translate(this.x,this.y),fill(this.bgColor),stroke(255),rectMode(CORNER),rect(0,0,this.w,this.h),textSize(this.textSize),textAlign(LEFT,TOP),fill(this.textColor),noStroke(),text(this.text,this._paddingLeft,this._paddingTop),pop()}_calculateSize(){const lines=this.text.split(/\n/gm);textSize(this.textSize);let longestLineWidth=textWidth(lines[0]);for(let i=1;i<lines.length;i++){const lineWidth=textWidth(lines[i]);lineWidth>longestLineWidth&&(longestLineWidth=lineWidth)}this.w=longestLineWidth+this._paddingLeft+this._paddingRight,this.h=lines.length*this.textSize+this._paddingTop+this._paddingBottom}setText(txt){this._setText(txt),this._calculateSize()}_setText(txt){this.text=txt}setTextSize(txtSize){_setTextSize(txtSize),this._calculateSize()}_setTextSize(txtSize){this.textSize=txtSize}setPadding(pLeft,pRight,pTop,pBottom){this._setPadding(pLeft,pRight,pTop,pBottom),this._calculateSize()}_setPadding(pLeft,pRight,pTop,pBottom){this._paddingLeft=pLeft,this._paddingRight=pRight,this._paddingTop=pTop,this._paddingBottom=pBottom}},SJ.MouseFollowingPopup=class{constructor(txt,txtSize=16,textColor=color(255),bgColor=color(0,10,50)){this.isVisible=!1,this.popup=new SJ.TextWindow(0,0,txt,txtSize,textColor,bgColor)}draw(){push();const maxX=SJ.SCREEN_WIDTH-this.popup.w,maxY=SJ.SCREEN_HEIGHT-this.popup.h;let x=max(min(maxX,SJ.mouseScreenX-this.popup.w/2),0),y=max(min(maxY,SJ.mouseScreenY-this.popup.h-10),0);translate(x,y),this.popup.draw(),pop()}show(){this.isVisible=!0}hide(){this.isVisible=!1}},SJ.DrawableRect=class{constructor(x,y,w,h,col){this.x=x,this.y=y,this.w=w,this.h=h,this.color=col,this.mode=CORNER,this.isVisible=!0}draw(){push(),rectMode(this.mode),fill(this.color),noStroke(),rect(this.x,this.y,this.w,this.h),pop()}show(){this.isVisible=!0}hide(){this.isVisible=!1}},SJ.LabelWithBackground=class extends SJ.DrawableRect{constructor(txt,x,y,w,h,txtSize=16,col=color(255),bgColor=color(0),align=LEFT,vAlign=CENTER){super(x,y,w,h,bgColor);let lx=x,ly=y;switch(align){case LEFT:lx+=10;break;case CENTER:lx+=w/2;break;case RIGHT:lx+=w-10}switch(vAlign){case TOP:ly+=10;break;case CENTER:ly+=h/2;break;case BOTTOM:ly+=h-10}this.label=new SJ.Label(txt,lx,ly,align,vAlign,txtSize,col)}draw(){push(),rectMode(this.mode),fill(this.color),noStroke(),rect(this.x,this.y,this.w,this.h),pop(),this.label.draw()}},SJ.WindDisplay=class{constructor(){this.radius=220,this.offset=50,this.arrowImg=SJ.ImageLoader.load("arrow.png"),this.rotate=0}draw(){push(),fill(40,70,255),noStroke(),translate(SJ.SCREEN_WIDTH,0),circle(-this.offset,this.offset,this.radius),push(),translate(-60,60),rotate(SJ.airSystem.angle),image(this.arrowImg,-40,-40,80,80),pop(),fill(255),textAlign(CENTER);const airForce=SJ.airSystem.airForce,decVal=floor(10*airForce%10),roundedForce=floor(airForce);text(roundedForce+"."+decVal+" m/s",-this.offset-10,130),pop(),this.rotate+=.1}},SJ.SpeedDisplay=class{constructor(){this.disp=new SJ.LabelWithBackground("Szybkość",SJ.SCREEN_WIDTH-100,140,100,80,16,color(255),color(0,0,80),LEFT,BOTTOM)}draw(){const jumperVel=SJ.jumper.body.velocity,jumperSpeed=floor(10*Matter.Vector.magnitude(jumperVel))/10;this.disp.label.content="Szybkość\n"+jumperSpeed+" m/s",this.disp.draw()}},SJ.HeightDisplay=class{constructor(){this.disp=new SJ.LabelWithBackground("Wysokość",SJ.SCREEN_WIDTH-100,220,100,60,16,color(255),color(0,0,60),LEFT,BOTTOM)}draw(){var jumperHeight=0;if(!SJ.jumper.body.isStatic){const jumperPos=SJ.jumper.body.position;for(let i=1;i<PAD_COLLISION_POINTS.length;i++){const p2=PAD_COLLISION_POINTS[i];if(jumperPos.x<=p2.x){const p1=PAD_COLLISION_POINTS[i-1],diffX=jumperPos.x-p1.x,distX=p2.x-p1.x,diffY=p2.y-p1.y,k=distX/diffX,yUnderJumper=p1.y+k*diffY;var jumperHeight=max(floor(yUnderJumper-SJ.jumper.body.position.y),0);break}}}this.disp.label.content="Wysokość\n"+jumperHeight+" m",this.disp.draw()}},SJ.ItemBox=class{constructor(item,x,y,w,h){this.item=item,this.setPosition(x,y),this.setSize(w,h),this.item.isActiveItem&&(this._fill=()=>{this.item.isActive?fill(50,50,180):this.item.disabled?fill(50,50,50):fill(255,200,200)})}setPosition(x,y){this.x=x,this.y=y}setSize(w,h){this.w=w,this.h=h}draw(){push(),translate(this.x,this.y),rectMode(CORNER),this._fill(),rect(0,0,this.w,this.h),pop()}_fill(){fill(50,50,180)}},SJ.ItemsDisplay=class{constructor(){this._itemsBoxes=[]}updateItemsList(){this._itemsBoxes=[];const boxWidth=48,xSeparator=64,itemsCount=SJ.itemsManager.getItemsCount(),allItemsWidth=64*(itemsCount-1)+48;let boxX=SJ.SCREEN_MIDDLE_X-allItemsWidth/2;const boxY=SJ.SCREEN_HEIGHT-64;SJ.itemsManager._activeItems.forEach(item=>{this._itemsBoxes.push(new SJ.ItemBox(item,boxX,boxY,48,48)),boxX+=64}),SJ.itemsManager._items.forEach(item=>{this._itemsBoxes.push(new SJ.ItemBox(item,boxX,boxY,48,48)),boxX+=64}),print(this._itemsBoxes)}draw(){push(),fill(0,0,50),rect(100,SJ.SCREEN_HEIGHT-80,SJ.SCREEN_WIDTH-200,80),pop(),this._itemsBoxes.forEach(itemBox=>{itemBox.draw()})}},SJ.Popup=class{constructor(w,h,drawable){this.x=0,this.y=0,this.w=SJ.SCREEN_WIDTH,this.h=SJ.SCREEN_HEIGHT,this._drawable=drawable,this.isVisible=!1,this.darkBackground=new SJ.DrawableRect(0,0,SJ.SCREEN_WIDTH,SJ.SCREEN_HEIGHT,color(0,0,0,200)),this.bgRect=new SJ.DrawableRect(SJ.SCREEN_MIDDLE_X,SJ.SCREEN_MIDDLE_Y,w,h,color(50,70,140)),this.bgRect.mode=CENTER,this.canStopMouse=!0,this.onMousePress=()=>{},this.onMouseRelease=()=>{},this.onMouseEnter=()=>{},this.onMouseLeave=()=>{}}draw(){this.darkBackground.draw(),this.bgRect.draw()}show(){this.isVisible=!0,this._drawable.forEach(obj=>{obj.show()})}hide(){this.isVisible=!1,this._drawable.forEach(obj=>{obj.hide()})}},SJ.PausePopup=class{constructor(){const learnBtn=new SJ.Button("Samouczek",SJ.SCREEN_MIDDLE_X-100,320,200,40,null,()=>{print("Samouczek!")});learnBtn.disabled=!0;const drawable=[new SJ.Button("Wznów",SJ.SCREEN_MIDDLE_X-100,200,200,40,null,()=>{SJ.main.setRunning(!0)}),new SJ.Button("Powtórz skok",SJ.SCREEN_MIDDLE_X-100,260,200,40,null,()=>{SJ.restartGame()}),learnBtn,new SJ.Button("Wróc do menu",SJ.SCREEN_MIDDLE_X-100,380,200,40,null,()=>{SJ.ScreensManager.screens.game.pausePopup.hide(),SJ.backToMenu()})];this.popup=new SJ.Popup(300,500,drawable),this.hide()}show(){this.popup.show()}hide(){this.popup.hide()}},SJ.JumpEndPopup=class{constructor(){this.scoreLabel=new SJ.Label("520",SJ.SCREEN_MIDDLE_X,290,CENTER,TOP,40);const drawable=[new SJ.Label("Koniec skoku",SJ.SCREEN_MIDDLE_X,200,CENTER,TOP,32),new SJ.Label("Zdobyte punkty:",SJ.SCREEN_MIDDLE_X,255,CENTER,TOP,24),this.scoreLabel,new SJ.Button("Powtórz skok",SJ.SCREEN_MIDDLE_X-100,360,200,40,null,()=>{this.hide(),SJ.ratersDisplay.hide(),SJ.restartGame()}),new SJ.Button("Wróc do menu",SJ.SCREEN_MIDDLE_X-100,420,200,40,null,()=>{this.hide(),SJ.ratersDisplay.hide(),SJ.backToMenu()})];this.popup=new SJ.Popup(300,500,drawable),this.hide()}show(){this.scoreLabel.content=SJ.scoreCounter.score,this.popup.show()}hide(){this.popup.hide()}},SJ.RaterBox=class extends SJ.LabelWithBackground{constructor(titleText,label,x,y,w,h){super(label,x,y,w,h),this.title=new SJ.MouseFollowingPopup(titleText)}onMouseEnter(){this.title.show()}onMouseLeave(){this.title.hide()}onMousePress(){}onMouseRelease(){}},SJ.RatersDisplay=class{constructor(){this._ratersBoxes=[];const boxesX=SJ.SCREEN_WIDTH-400;let boxY=200;const ySeparator=40;this.label=new SJ.Label("Oceny sędziów",boxesX,boxY,LEFT,TOP,24);const ratersTitles=["Ocena za wybicie","Ocena za stabilność lotu","Ocena za gwałtowność obracania się","Ocena za długość skoku","Ocena za lądowanie"];for(let i=0;i<5;i++){const raterBox=new SJ.RaterBox(ratersTitles[i],"17.5",boxesX,boxY+=40,100,35);raterBox.canStopMouse=!0,raterBox.color=color(40,50,120),raterBox.hide(),this._ratersBoxes.push(raterBox)}this.isVisible=!1}draw(){this.label.draw()}show(){let i=0;SJ.scoreCounter.forEachRaters(rater=>{const raterBox=this._ratersBoxes[i++];raterBox.label.content=rater.getScore(),raterBox.show()}),this.isVisible=!0}hide(){this.isVisible=!1,this._ratersBoxes.forEach(raterBox=>{raterBox.hide()})}},SJ.createLocationButton=(locationName,x,y,fileName)=>{const btn=new SJ.Button(locationName,x,y,200,120);return btn.label.fontSize=18,btn.label.vAlign=BOTTOM,btn.onMouseRelease=()=>{SJ._startGame(fileName)},btn.draw=()=>{push(),btn.disabled?fill(64,57,57):btn.isMouseIn?btn.isPress?fill(158,55,55):fill(224,130,130):fill(196,94,94),rect(btn.x,btn.y,btn.w,btn.h),push(),translate(btn.x+btn.w/2,btn.y+btn.h-2),btn.label.draw(),pop(),pop()},btn},SJ.createItemButton=(x,y,item)=>{const btn=new SJ.Button(item.itemName,x,y,200,120);return btn.label.fontSize=18,btn.label.vAlign=BOTTOM,btn.popup=new SJ.MouseFollowingPopup(item.description),btn.onMouseEnter=()=>{btn.popup.show()},btn.onMouseLeave=()=>{btn.popup.hide()},btn.onMouseRelease=()=>{SJ.money<item.price||(SJ.itemsManager.addItem(item),btn.disabled=!0,SJ.money-=item.price,btn.popup.hide())},btn.draw=()=>{push(),btn.disabled?fill(24,150,49):btn.isMouseIn?btn.isPress?fill(25,49,115):fill(46,95,230):fill(32,76,199),rect(btn.x,btn.y,btn.w,btn.h),push(),translate(btn.x+btn.w/2,btn.y+btn.h-2),btn.disabled?fill(200):fill(255),btn.label.draw(),pop(),pop()},btn};