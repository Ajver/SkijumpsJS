SJ.Rater=class{constructor(rateFunc,getScore){this.rate=rateFunc,this.score=0,this.getScore=getScore||(()=>this.score)}},SJ.ScoreCounter=class{constructor(){this.previousJumperAngle=0,this.jumpRater=new SJ.Rater(()=>{const jumperX=SJ.jumper.body.position.x,jumpAreaWidth=JUMP_END_POINT-JUMP_POINT,jumperRelativeX=jumperX-JUMP_POINT,proportion=jumperRelativeX/jumpAreaWidth;this.jumpRater.score=round(40*proportion),this.jumpRater.score/=2}),this.stableFlyRater=new SJ.Rater(()=>{const currentAnlge=SJ.jumper.body.angle,relativeAngle=abs(currentAnlge-this.previousJumperAngle);this.stableFlyRater.reachedJumperAngle+=relativeAngle},()=>{const reachedAngle=degrees(this.stableFlyRater.reachedJumperAngle),maxBestAngle=50;if(reachedAngle<50)return 20;{const maxAcceptedRotate=300,score=round((maxAcceptedRotate-reachedAngle)/(maxAcceptedRotate-50)*40)/2;return max(min(score,20),0)}}),this.stableFlyRater.reachedJumperAngle=0,this.rotatingSpeedRater=new SJ.Rater(()=>{const currentAnlge=SJ.jumper.body.angle,relativeAngle=abs(currentAnlge-this.previousJumperAngle),maxAcceptedRelativeAngle=radians(1);relativeAngle>maxAcceptedRelativeAngle&&(this.rotatingSpeedRater.score-=.1)},()=>{const score=round(this.rotatingSpeedRater.score)/2;return max(score,0)}),this.rotatingSpeedRater.score=40,this.distanceRater=new SJ.Rater(()=>{const relativeDist=this.mettersDistTo_K-SJ.V.minJumpDistance,maxminDist=SJ.V.maxJumpDistance-SJ.V.minJumpDistance,proportion=relativeDist/maxminDist;this.distanceRater.score=max(min(round(40*proportion)/2,20),0)}),this._raters=[this.jumpRater,this.stableFlyRater,this.rotatingSpeedRater],this._PIXELS_TO_METERS=SJ.V.padSize/(POINT_K-JUMP_END_POINT),this._POINT_PER_METER=2.8,this.score=0}update(){SJ.jumper.body.isStatic||(this.stableFlyRater.rate(),this.rotatingSpeedRater.rate(),this.previousJumperAngle=SJ.jumper.body.angle)}calculateDistance(){const landX=SJ.jumper.body.position.x,distTo_K=landX-POINT_K;this.mettersDistTo_K=distTo_K*this._PIXELS_TO_METERS;let points=60+this.mettersDistTo_K*this._POINT_PER_METER;return points=round(points,2)}calculateScore(){let score=0;score+=this.calculateDistance(),this.distanceRater.rate(),this._raters.forEach(rater=>{score+=rater.getScore()}),this.score=score}rate(){}};